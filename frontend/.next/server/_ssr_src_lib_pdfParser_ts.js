"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_pdfParser_ts";
exports.ids = ["_ssr_src_lib_pdfParser_ts"];
exports.modules = {

/***/ "(ssr)/./src/lib/pdfParser.ts":
/*!******************************!*\
  !*** ./src/lib/pdfParser.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseCASFile: () => (/* binding */ parseCASFile)\n/* harmony export */ });\n/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdfjs-dist */ \"(ssr)/../node_modules/pdfjs-dist/build/pdf.mjs\");\n\n// Use worker from node_modules to ensure version matching\nif (false) {}\n// Detailed logging helper\nconst log = {\n    info: (msg, data)=>{\n        console.log(`[PDF-PARSER] INFO: ${msg}`, data !== undefined ? data : \"\");\n    },\n    error: (msg, error)=>{\n        console.error(`[PDF-PARSER] ERROR: ${msg}`, error !== undefined ? error : \"\");\n        if (error?.stack) console.error(`[PDF-PARSER] Stack:`, error.stack);\n    },\n    debug: (msg, data)=>{\n        console.log(`[PDF-PARSER] DEBUG: ${msg}`, data !== undefined ? data : \"\");\n    },\n    warn: (msg, data)=>{\n        console.warn(`[PDF-PARSER] WARN: ${msg}`, data !== undefined ? data : \"\");\n    }\n};\nasync function extractTextFromPDF(file, password) {\n    log.info(\"Starting PDF text extraction\", {\n        fileName: file.name,\n        fileSize: file.size,\n        fileType: file.type\n    });\n    try {\n        log.debug(\"Converting file to ArrayBuffer...\");\n        const arrayBuffer = await file.arrayBuffer();\n        log.debug(\"ArrayBuffer created\", {\n            byteLength: arrayBuffer.byteLength\n        });\n        log.debug(\"PDF.js worker source:\", pdfjs_dist__WEBPACK_IMPORTED_MODULE_0__.GlobalWorkerOptions.workerSrc);\n        log.info(\"Loading PDF document with password...\");\n        // PDF.js can accept password as string or Uint8Array\n        // Try with string first, then handle password callback for encrypted PDFs\n        const passwordStr = password || \"\";\n        log.debug(\"Preparing password for PDF.js\", {\n            hasPassword: passwordStr.length > 0\n        });\n        const loadingTask = pdfjs_dist__WEBPACK_IMPORTED_MODULE_0__.getDocument({\n            data: arrayBuffer,\n            password: passwordStr\n        });\n        // Handle password-protected PDF - set callback to provide password if needed\n        let passwordAttempted = false;\n        loadingTask.onPassword = (updatePassword, reason)=>{\n            log.debug(\"PDF password callback triggered\", {\n                reason,\n                passwordAttempted\n            });\n            // Reason: 1 = user password, 2 = owner password\n            if (!passwordAttempted && passwordStr) {\n                passwordAttempted = true;\n                try {\n                    // Try updating with the provided password\n                    updatePassword(passwordStr);\n                } catch (err) {\n                    log.error(\"Error calling updatePassword\", err);\n                }\n            }\n        };\n        log.debug(\"PDF loading task created, awaiting promise...\");\n        const pdf = await loadingTask.promise;\n        log.info(\"PDF loaded successfully\", {\n            numPages: pdf.numPages\n        });\n        let fullText = \"\";\n        for(let i = 1; i <= pdf.numPages; i++){\n            log.debug(`Extracting text from page ${i}/${pdf.numPages}...`);\n            const page = await pdf.getPage(i);\n            const textContent = await page.getTextContent();\n            const pageText = textContent.items.map((item)=>item.str).join(\" \");\n            fullText += pageText + \"\\n\";\n            log.debug(`Page ${i} extracted`, {\n                textLength: pageText.length\n            });\n        }\n        log.info(\"PDF text extraction complete\", {\n            totalTextLength: fullText.length\n        });\n        return fullText;\n    } catch (error) {\n        log.error(\"PDF extraction failed\", error);\n        log.error(\"Error details\", {\n            name: error?.name,\n            message: error?.message,\n            code: error?.code\n        });\n        // More specific error messages based on PDF.js error types\n        if (error?.name === \"PasswordException\" || error?.message?.toLowerCase().includes(\"password\")) {\n            throw new Error(\"Incorrect password. Please check and try again.\");\n        } else if (error?.name === \"InvalidPDFException\" || error?.message?.includes(\"Invalid PDF\")) {\n            throw new Error(\"Invalid PDF file. Please upload a valid CAS PDF.\");\n        } else if (error?.message?.includes(\"worker\")) {\n            throw new Error(\"PDF processing failed. Please refresh and try again.\");\n        } else if (error?.message?.includes(\"encrypted\") || error?.message?.includes(\"Encrypted\")) {\n            throw new Error(\"Incorrect password. Please check and try again.\");\n        }\n        throw new Error(`Failed to extract PDF text: ${error?.message || \"Unknown error\"}`);\n    }\n}\nfunction parseCASText(text) {\n    const funds = [];\n    let totalValue = 0;\n    let totalInvested = 0;\n    // Regex patterns for CAS format\n    const fundPattern = /([A-Za-z\\s\\-&()]+?)\\s+(?:ISIN:|Growth|Dividend)\\s+([A-Z0-9]{12})?[\\s\\S]*?(?:Plan:|Direct|Regular)\\s+(Direct|Regular)[\\s\\S]*?₹\\s+([\\d,]+\\.?\\d*)\\s+₹\\s+([\\d,]+\\.?\\d*)/gi;\n    const folio_pattern = /Folio\\s+([A-Z0-9\\s/\\-]+?)\\s+(?=Folio|Account|Statement|$)/i;\n    const amc_pattern = /(ICICI|HDFC|Axis|SBI|Motilal|Franklin|Kotak|DSP|L&T|Aditya Birla|Nippon|JM Financial|IDFC|Canara|HDFC Life|LIC)/i;\n    const lines = text.split(\"\\n\");\n    for(let i = 0; i < lines.length; i++){\n        const line = lines[i];\n        // Try to match fund entry\n        if (line.match(/ISIN:|Growth|Dividend/) && line.match(/Direct|Regular/)) {\n            try {\n                // Extract fund name\n                const nameMatch = line.match(/^([A-Za-z\\s\\-&()]+?)\\s+(?:ISIN:|Growth|Dividend)/);\n                const name = nameMatch ? nameMatch[1].trim() : \"Unknown Fund\";\n                // Extract plan type\n                const planMatch = line.match(/(Direct|Regular)/);\n                const planType = planMatch ? planMatch[1] : \"Regular\";\n                // Extract current value and invested amount\n                const valueMatch = line.match(/₹\\s+([\\d,]+\\.?\\d*)/g);\n                if (valueMatch && valueMatch.length >= 2) {\n                    const currentValue = parseFloat(valueMatch[valueMatch.length - 1].replace(/₹\\s+/, \"\").replace(/,/g, \"\"));\n                    const investedAmount = parseFloat(valueMatch[0].replace(/₹\\s+/, \"\").replace(/,/g, \"\"));\n                    // Extract folio\n                    const folioMatch = lines.slice(Math.max(0, i - 5), i).reverse().find((l)=>l.match(/[A-Z0-9\\/\\-]{10,}/));\n                    const folio = folioMatch ? folioMatch.trim().substring(0, 20) : \"N/A\";\n                    // Guess AMC from fund name\n                    const amcMatch = name.match(/(ICICI|HDFC|Axis|SBI|Motilal|Franklin|Kotak|DSP|L&T|Aditya|Nippon|JM|IDFC|Canara|LIC)/i);\n                    const amc = amcMatch ? amcMatch[1] : \"Unknown\";\n                    if (currentValue > 0) {\n                        funds.push({\n                            name,\n                            folio,\n                            value: currentValue,\n                            invested: investedAmount,\n                            planType,\n                            amc\n                        });\n                        totalValue += currentValue;\n                        totalInvested += investedAmount;\n                    }\n                }\n            } catch (e) {\n            // Continue parsing\n            }\n        }\n    }\n    return {\n        funds,\n        totalValue,\n        totalInvested\n    };\n}\nasync function parseCASFile(file, password) {\n    log.info(\"=== Starting CAS file parsing ===\");\n    log.info(\"File details\", {\n        name: file.name,\n        size: file.size,\n        type: file.type\n    });\n    const startTime = performance.now();\n    try {\n        log.info(\"Step 1: Extracting text from PDF...\");\n        const text = await extractTextFromPDF(file, password);\n        log.info(\"Step 1 complete: Text extracted\", {\n            textLength: text.length\n        });\n        log.info(\"Step 2: Parsing CAS text for funds...\");\n        const data = parseCASText(text);\n        log.info(\"Step 2 complete: Text parsed\", {\n            fundsCount: data.funds.length,\n            totalValue: data.totalValue,\n            totalInvested: data.totalInvested\n        });\n        const endTime = performance.now();\n        const duration = (endTime - startTime).toFixed(0);\n        log.info(`=== Parsing complete in ${duration}ms ===`);\n        log.info(\"Results\", {\n            funds: data.funds.length,\n            totalValue: `₹${data.totalValue.toLocaleString(\"en-IN\")}`\n        });\n        if (data.funds.length === 0) {\n            log.warn(\"No funds found in parsed data\");\n            log.debug(\"First 1000 chars of extracted text:\", text.substring(0, 1000));\n            throw new Error(\"No funds found in CAS. Please check the file format and password.\");\n        }\n        return data;\n    } catch (error) {\n        const endTime = performance.now();\n        log.error(`=== Parsing failed after ${(endTime - startTime).toFixed(0)}ms ===`);\n        log.error(\"Error in parseCASFile\", error);\n        log.error(\"Error type\", {\n            name: error?.name,\n            message: error?.message,\n            isError: error instanceof Error\n        });\n        // Re-throw with proper error message\n        if (error instanceof Error) {\n            throw error;\n        }\n        throw new Error(\"Failed to parse CAS PDF. Please try again.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFDbkM7UUFFQSxNQUFNcUMsVUFBVUgsWUFBWUMsR0FBRztRQUMvQixNQUFNRyxXQUFXLENBQUNELFVBQVVKLFNBQVEsRUFBR00sT0FBTyxDQUFDO1FBQy9DaEcsSUFBSUMsSUFBSSxDQUFDLENBQUMsd0JBQXdCLEVBQUU4RixTQUFTLE1BQU0sQ0FBQztRQUNwRC9GLElBQUlDLElBQUksQ0FBQyxXQUFXO1lBQ2xCc0QsT0FBT3BELEtBQUtvRCxLQUFLLENBQUNoQyxNQUFNO1lBQ3hCaUMsWUFBWSxDQUFDLENBQUMsRUFBRXJELEtBQUtxRCxVQUFVLENBQUN5QyxjQUFjLENBQUMsU0FBUyxDQUFDO1FBQzNEO1FBRUEsSUFBSTlGLEtBQUtvRCxLQUFLLENBQUNoQyxNQUFNLEtBQUssR0FBRztZQUMzQnZCLElBQUlTLElBQUksQ0FBQztZQUNUVCxJQUFJUSxLQUFLLENBQUMsdUNBQXVDOEMsS0FBSzRCLFNBQVMsQ0FBQyxHQUFHO1lBQ25FLE1BQU0sSUFBSTlCLE1BQU07UUFDbEI7UUFFQSxPQUFPakQ7SUFDVCxFQUFFLE9BQU9HLE9BQVk7UUFDbkIsTUFBTXdGLFVBQVVILFlBQVlDLEdBQUc7UUFDL0I1RixJQUFJTSxLQUFLLENBQUMsQ0FBQyx5QkFBeUIsRUFBRSxDQUFDd0YsVUFBVUosU0FBUSxFQUFHTSxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDOUVoRyxJQUFJTSxLQUFLLENBQUMseUJBQXlCQTtRQUNuQ04sSUFBSU0sS0FBSyxDQUFDLGNBQWM7WUFDdEJRLE1BQU1SLE9BQU9RO1lBQ2JrQyxTQUFTMUMsT0FBTzBDO1lBQ2hCa0QsU0FBUzVGLGlCQUFpQjhDO1FBQzVCO1FBRUEscUNBQXFDO1FBQ3JDLElBQUk5QyxpQkFBaUI4QyxPQUFPO1lBQzFCLE1BQU05QztRQUNSO1FBQ0EsTUFBTSxJQUFJOEMsTUFBTTtJQUNsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvbGliL3BkZlBhcnNlci50cz9iNTlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBkZmpzTGliIGZyb20gJ3BkZmpzLWRpc3QnO1xuXG4vLyBVc2Ugd29ya2VyIGZyb20gbm9kZV9tb2R1bGVzIHRvIGVuc3VyZSB2ZXJzaW9uIG1hdGNoaW5nXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcGRmanNMaWIuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMgPSBuZXcgVVJMKFxuICAgICdwZGZqcy1kaXN0L2J1aWxkL3BkZi53b3JrZXIubWluLm1qcycsXG4gICAgaW1wb3J0Lm1ldGEudXJsLFxuICApLnRvU3RyaW5nKCk7XG59XG5cbi8vIERldGFpbGVkIGxvZ2dpbmcgaGVscGVyXG5jb25zdCBsb2cgPSB7XG4gIGluZm86IChtc2c6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBbUERGLVBBUlNFUl0gSU5GTzogJHttc2d9YCwgZGF0YSAhPT0gdW5kZWZpbmVkID8gZGF0YSA6ICcnKTtcbiAgfSxcbiAgZXJyb3I6IChtc2c6IHN0cmluZywgZXJyb3I/OiBhbnkpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGBbUERGLVBBUlNFUl0gRVJST1I6ICR7bXNnfWAsIGVycm9yICE9PSB1bmRlZmluZWQgPyBlcnJvciA6ICcnKTtcbiAgICBpZiAoZXJyb3I/LnN0YWNrKSBjb25zb2xlLmVycm9yKGBbUERGLVBBUlNFUl0gU3RhY2s6YCwgZXJyb3Iuc3RhY2spO1xuICB9LFxuICBkZWJ1ZzogKG1zZzogc3RyaW5nLCBkYXRhPzogYW55KSA9PiB7XG4gICAgY29uc29sZS5sb2coYFtQREYtUEFSU0VSXSBERUJVRzogJHttc2d9YCwgZGF0YSAhPT0gdW5kZWZpbmVkID8gZGF0YSA6ICcnKTtcbiAgfSxcbiAgd2FybjogKG1zZzogc3RyaW5nLCBkYXRhPzogYW55KSA9PiB7XG4gICAgY29uc29sZS53YXJuKGBbUERGLVBBUlNFUl0gV0FSTjogJHttc2d9YCwgZGF0YSAhPT0gdW5kZWZpbmVkID8gZGF0YSA6ICcnKTtcbiAgfVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBFeHRyYWN0ZWRGdW5kIHtcbiAgbmFtZTogc3RyaW5nO1xuICBmb2xpbzogc3RyaW5nO1xuICB2YWx1ZTogbnVtYmVyO1xuICBpbnZlc3RlZDogbnVtYmVyO1xuICBwbGFuVHlwZTogc3RyaW5nO1xuICBhbWM6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXJzZWRDQVNEYXRhIHtcbiAgZnVuZHM6IEV4dHJhY3RlZEZ1bmRbXTtcbiAgdG90YWxWYWx1ZTogbnVtYmVyO1xuICB0b3RhbEludmVzdGVkOiBudW1iZXI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RUZXh0RnJvbVBERihmaWxlOiBGaWxlLCBwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgbG9nLmluZm8oJ1N0YXJ0aW5nIFBERiB0ZXh0IGV4dHJhY3Rpb24nLCB7IGZpbGVOYW1lOiBmaWxlLm5hbWUsIGZpbGVTaXplOiBmaWxlLnNpemUsIGZpbGVUeXBlOiBmaWxlLnR5cGUgfSk7XG4gIFxuICB0cnkge1xuICAgIGxvZy5kZWJ1ZygnQ29udmVydGluZyBmaWxlIHRvIEFycmF5QnVmZmVyLi4uJyk7XG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XG4gICAgbG9nLmRlYnVnKCdBcnJheUJ1ZmZlciBjcmVhdGVkJywgeyBieXRlTGVuZ3RoOiBhcnJheUJ1ZmZlci5ieXRlTGVuZ3RoIH0pO1xuICAgIFxuICAgIGxvZy5kZWJ1ZygnUERGLmpzIHdvcmtlciBzb3VyY2U6JywgcGRmanNMaWIuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMpO1xuICAgIGxvZy5pbmZvKCdMb2FkaW5nIFBERiBkb2N1bWVudCB3aXRoIHBhc3N3b3JkLi4uJyk7XG4gICAgXG4gICAgLy8gUERGLmpzIGNhbiBhY2NlcHQgcGFzc3dvcmQgYXMgc3RyaW5nIG9yIFVpbnQ4QXJyYXlcbiAgICAvLyBUcnkgd2l0aCBzdHJpbmcgZmlyc3QsIHRoZW4gaGFuZGxlIHBhc3N3b3JkIGNhbGxiYWNrIGZvciBlbmNyeXB0ZWQgUERGc1xuICAgIGNvbnN0IHBhc3N3b3JkU3RyID0gcGFzc3dvcmQgfHwgJyc7XG4gICAgbG9nLmRlYnVnKCdQcmVwYXJpbmcgcGFzc3dvcmQgZm9yIFBERi5qcycsIHsgaGFzUGFzc3dvcmQ6IHBhc3N3b3JkU3RyLmxlbmd0aCA+IDAgfSk7XG4gICAgXG4gICAgY29uc3QgbG9hZGluZ1Rhc2sgPSBwZGZqc0xpYi5nZXREb2N1bWVudCh7XG4gICAgICBkYXRhOiBhcnJheUJ1ZmZlcixcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFN0cixcbiAgICB9KTtcbiAgICBcbiAgICAvLyBIYW5kbGUgcGFzc3dvcmQtcHJvdGVjdGVkIFBERiAtIHNldCBjYWxsYmFjayB0byBwcm92aWRlIHBhc3N3b3JkIGlmIG5lZWRlZFxuICAgIGxldCBwYXNzd29yZEF0dGVtcHRlZCA9IGZhbHNlO1xuICAgIGxvYWRpbmdUYXNrLm9uUGFzc3dvcmQgPSAodXBkYXRlUGFzc3dvcmQ6IEZ1bmN0aW9uLCByZWFzb246IG51bWJlcikgPT4ge1xuICAgICAgbG9nLmRlYnVnKCdQREYgcGFzc3dvcmQgY2FsbGJhY2sgdHJpZ2dlcmVkJywgeyByZWFzb24sIHBhc3N3b3JkQXR0ZW1wdGVkIH0pO1xuICAgICAgLy8gUmVhc29uOiAxID0gdXNlciBwYXNzd29yZCwgMiA9IG93bmVyIHBhc3N3b3JkXG4gICAgICBpZiAoIXBhc3N3b3JkQXR0ZW1wdGVkICYmIHBhc3N3b3JkU3RyKSB7XG4gICAgICAgIHBhc3N3b3JkQXR0ZW1wdGVkID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUcnkgdXBkYXRpbmcgd2l0aCB0aGUgcHJvdmlkZWQgcGFzc3dvcmRcbiAgICAgICAgICB1cGRhdGVQYXNzd29yZChwYXNzd29yZFN0cik7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxvZy5lcnJvcignRXJyb3IgY2FsbGluZyB1cGRhdGVQYXNzd29yZCcsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGxvZy5kZWJ1ZygnUERGIGxvYWRpbmcgdGFzayBjcmVhdGVkLCBhd2FpdGluZyBwcm9taXNlLi4uJyk7XG4gICAgY29uc3QgcGRmID0gYXdhaXQgbG9hZGluZ1Rhc2sucHJvbWlzZTtcbiAgICBsb2cuaW5mbygnUERGIGxvYWRlZCBzdWNjZXNzZnVsbHknLCB7IG51bVBhZ2VzOiBwZGYubnVtUGFnZXMgfSk7XG5cbiAgICBsZXQgZnVsbFRleHQgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHBkZi5udW1QYWdlczsgaSsrKSB7XG4gICAgICBsb2cuZGVidWcoYEV4dHJhY3RpbmcgdGV4dCBmcm9tIHBhZ2UgJHtpfS8ke3BkZi5udW1QYWdlc30uLi5gKTtcbiAgICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBwZGYuZ2V0UGFnZShpKTtcbiAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gYXdhaXQgcGFnZS5nZXRUZXh0Q29udGVudCgpO1xuICAgICAgY29uc3QgcGFnZVRleHQgPSB0ZXh0Q29udGVudC5pdGVtc1xuICAgICAgICAubWFwKChpdGVtOiBhbnkpID0+IGl0ZW0uc3RyKVxuICAgICAgICAuam9pbignICcpO1xuICAgICAgZnVsbFRleHQgKz0gcGFnZVRleHQgKyAnXFxuJztcbiAgICAgIGxvZy5kZWJ1ZyhgUGFnZSAke2l9IGV4dHJhY3RlZGAsIHsgdGV4dExlbmd0aDogcGFnZVRleHQubGVuZ3RoIH0pO1xuICAgIH1cblxuICAgIGxvZy5pbmZvKCdQREYgdGV4dCBleHRyYWN0aW9uIGNvbXBsZXRlJywgeyB0b3RhbFRleHRMZW5ndGg6IGZ1bGxUZXh0Lmxlbmd0aCB9KTtcbiAgICByZXR1cm4gZnVsbFRleHQ7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBsb2cuZXJyb3IoJ1BERiBleHRyYWN0aW9uIGZhaWxlZCcsIGVycm9yKTtcbiAgICBsb2cuZXJyb3IoJ0Vycm9yIGRldGFpbHMnLCB7IFxuICAgICAgbmFtZTogZXJyb3I/Lm5hbWUsIFxuICAgICAgbWVzc2FnZTogZXJyb3I/Lm1lc3NhZ2UsXG4gICAgICBjb2RlOiBlcnJvcj8uY29kZVxuICAgIH0pO1xuICAgIFxuICAgIC8vIE1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZXMgYmFzZWQgb24gUERGLmpzIGVycm9yIHR5cGVzXG4gICAgaWYgKGVycm9yPy5uYW1lID09PSAnUGFzc3dvcmRFeGNlcHRpb24nIHx8IGVycm9yPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwYXNzd29yZCcpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBwYXNzd29yZC4gUGxlYXNlIGNoZWNrIGFuZCB0cnkgYWdhaW4uJyk7XG4gICAgfSBlbHNlIGlmIChlcnJvcj8ubmFtZSA9PT0gJ0ludmFsaWRQREZFeGNlcHRpb24nIHx8IGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnSW52YWxpZCBQREYnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFBERiBmaWxlLiBQbGVhc2UgdXBsb2FkIGEgdmFsaWQgQ0FTIFBERi4nKTtcbiAgICB9IGVsc2UgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnd29ya2VyJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUERGIHByb2Nlc3NpbmcgZmFpbGVkLiBQbGVhc2UgcmVmcmVzaCBhbmQgdHJ5IGFnYWluLicpO1xuICAgIH0gZWxzZSBpZiAoZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdlbmNyeXB0ZWQnKSB8fCBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ0VuY3J5cHRlZCcpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luY29ycmVjdCBwYXNzd29yZC4gUGxlYXNlIGNoZWNrIGFuZCB0cnkgYWdhaW4uJyk7XG4gICAgfVxuICAgIFxuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGV4dHJhY3QgUERGIHRleHQ6ICR7ZXJyb3I/Lm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InfWApO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ0FTVGV4dCh0ZXh0OiBzdHJpbmcpOiBQYXJzZWRDQVNEYXRhIHtcbiAgY29uc3QgZnVuZHM6IEV4dHJhY3RlZEZ1bmRbXSA9IFtdO1xuICBsZXQgdG90YWxWYWx1ZSA9IDA7XG4gIGxldCB0b3RhbEludmVzdGVkID0gMDtcblxuICAvLyBSZWdleCBwYXR0ZXJucyBmb3IgQ0FTIGZvcm1hdFxuICBjb25zdCBmdW5kUGF0dGVybiA9IC8oW0EtWmEtelxcc1xcLSYoKV0rPylcXHMrKD86SVNJTjp8R3Jvd3RofERpdmlkZW5kKVxccysoW0EtWjAtOV17MTJ9KT9bXFxzXFxTXSo/KD86UGxhbjp8RGlyZWN0fFJlZ3VsYXIpXFxzKyhEaXJlY3R8UmVndWxhcilbXFxzXFxTXSo/4oK5XFxzKyhbXFxkLF0rXFwuP1xcZCopXFxzK+KCuVxccysoW1xcZCxdK1xcLj9cXGQqKS9naTtcbiAgXG4gIGNvbnN0IGZvbGlvX3BhdHRlcm4gPSAvRm9saW9cXHMrKFtBLVowLTlcXHMvXFwtXSs/KVxccysoPz1Gb2xpb3xBY2NvdW50fFN0YXRlbWVudHwkKS9pO1xuICBjb25zdCBhbWNfcGF0dGVybiA9IC8oSUNJQ0l8SERGQ3xBeGlzfFNCSXxNb3RpbGFsfEZyYW5rbGlufEtvdGFrfERTUHxMJlR8QWRpdHlhIEJpcmxhfE5pcHBvbnxKTSBGaW5hbmNpYWx8SURGQ3xDYW5hcmF8SERGQyBMaWZlfExJQykvaTtcblxuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XG5cbiAgICAvLyBUcnkgdG8gbWF0Y2ggZnVuZCBlbnRyeVxuICAgIGlmIChsaW5lLm1hdGNoKC9JU0lOOnxHcm93dGh8RGl2aWRlbmQvKSAmJiBsaW5lLm1hdGNoKC9EaXJlY3R8UmVndWxhci8pKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBFeHRyYWN0IGZ1bmQgbmFtZVxuICAgICAgICBjb25zdCBuYW1lTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFtBLVphLXpcXHNcXC0mKCldKz8pXFxzKyg/OklTSU46fEdyb3d0aHxEaXZpZGVuZCkvKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IG5hbWVNYXRjaCA/IG5hbWVNYXRjaFsxXS50cmltKCkgOiAnVW5rbm93biBGdW5kJztcblxuICAgICAgICAvLyBFeHRyYWN0IHBsYW4gdHlwZVxuICAgICAgICBjb25zdCBwbGFuTWF0Y2ggPSBsaW5lLm1hdGNoKC8oRGlyZWN0fFJlZ3VsYXIpLyk7XG4gICAgICAgIGNvbnN0IHBsYW5UeXBlID0gcGxhbk1hdGNoID8gcGxhbk1hdGNoWzFdIDogJ1JlZ3VsYXInO1xuXG4gICAgICAgIC8vIEV4dHJhY3QgY3VycmVudCB2YWx1ZSBhbmQgaW52ZXN0ZWQgYW1vdW50XG4gICAgICAgIGNvbnN0IHZhbHVlTWF0Y2ggPSBsaW5lLm1hdGNoKC/igrlcXHMrKFtcXGQsXStcXC4/XFxkKikvZyk7XG4gICAgICAgIGlmICh2YWx1ZU1hdGNoICYmIHZhbHVlTWF0Y2gubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlTWF0Y2hbdmFsdWVNYXRjaC5sZW5ndGggLSAxXS5yZXBsYWNlKC/igrlcXHMrLywgJycpLnJlcGxhY2UoLywvZywgJycpKTtcbiAgICAgICAgICBjb25zdCBpbnZlc3RlZEFtb3VudCA9IHBhcnNlRmxvYXQodmFsdWVNYXRjaFswXS5yZXBsYWNlKC/igrlcXHMrLywgJycpLnJlcGxhY2UoLywvZywgJycpKTtcblxuICAgICAgICAgIC8vIEV4dHJhY3QgZm9saW9cbiAgICAgICAgICBjb25zdCBmb2xpb01hdGNoID0gbGluZXMuc2xpY2UoTWF0aC5tYXgoMCwgaSAtIDUpLCBpKS5yZXZlcnNlKCkuZmluZChsID0+IGwubWF0Y2goL1tBLVowLTlcXC9cXC1dezEwLH0vKSk7XG4gICAgICAgICAgY29uc3QgZm9saW8gPSBmb2xpb01hdGNoID8gZm9saW9NYXRjaC50cmltKCkuc3Vic3RyaW5nKDAsIDIwKSA6ICdOL0EnO1xuXG4gICAgICAgICAgLy8gR3Vlc3MgQU1DIGZyb20gZnVuZCBuYW1lXG4gICAgICAgICAgY29uc3QgYW1jTWF0Y2ggPSBuYW1lLm1hdGNoKC8oSUNJQ0l8SERGQ3xBeGlzfFNCSXxNb3RpbGFsfEZyYW5rbGlufEtvdGFrfERTUHxMJlR8QWRpdHlhfE5pcHBvbnxKTXxJREZDfENhbmFyYXxMSUMpL2kpO1xuICAgICAgICAgIGNvbnN0IGFtYyA9IGFtY01hdGNoID8gYW1jTWF0Y2hbMV0gOiAnVW5rbm93bic7XG5cbiAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID4gMCkge1xuICAgICAgICAgICAgZnVuZHMucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIGZvbGlvLFxuICAgICAgICAgICAgICB2YWx1ZTogY3VycmVudFZhbHVlLFxuICAgICAgICAgICAgICBpbnZlc3RlZDogaW52ZXN0ZWRBbW91bnQsXG4gICAgICAgICAgICAgIHBsYW5UeXBlLFxuICAgICAgICAgICAgICBhbWMsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdG90YWxWYWx1ZSArPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB0b3RhbEludmVzdGVkICs9IGludmVzdGVkQW1vdW50O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDb250aW51ZSBwYXJzaW5nXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmdW5kcyxcbiAgICB0b3RhbFZhbHVlLFxuICAgIHRvdGFsSW52ZXN0ZWQsXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJzZUNBU0ZpbGUoZmlsZTogRmlsZSwgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8UGFyc2VkQ0FTRGF0YT4ge1xuICBsb2cuaW5mbygnPT09IFN0YXJ0aW5nIENBUyBmaWxlIHBhcnNpbmcgPT09Jyk7XG4gIGxvZy5pbmZvKCdGaWxlIGRldGFpbHMnLCB7IG5hbWU6IGZpbGUubmFtZSwgc2l6ZTogZmlsZS5zaXplLCB0eXBlOiBmaWxlLnR5cGUgfSk7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gIHRyeSB7XG4gICAgbG9nLmluZm8oJ1N0ZXAgMTogRXh0cmFjdGluZyB0ZXh0IGZyb20gUERGLi4uJyk7XG4gICAgY29uc3QgdGV4dCA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbVBERihmaWxlLCBwYXNzd29yZCk7XG4gICAgbG9nLmluZm8oJ1N0ZXAgMSBjb21wbGV0ZTogVGV4dCBleHRyYWN0ZWQnLCB7IHRleHRMZW5ndGg6IHRleHQubGVuZ3RoIH0pO1xuICAgIFxuICAgIGxvZy5pbmZvKCdTdGVwIDI6IFBhcnNpbmcgQ0FTIHRleHQgZm9yIGZ1bmRzLi4uJyk7XG4gICAgY29uc3QgZGF0YSA9IHBhcnNlQ0FTVGV4dCh0ZXh0KTtcbiAgICBsb2cuaW5mbygnU3RlcCAyIGNvbXBsZXRlOiBUZXh0IHBhcnNlZCcsIHsgXG4gICAgICBmdW5kc0NvdW50OiBkYXRhLmZ1bmRzLmxlbmd0aCwgXG4gICAgICB0b3RhbFZhbHVlOiBkYXRhLnRvdGFsVmFsdWUsXG4gICAgICB0b3RhbEludmVzdGVkOiBkYXRhLnRvdGFsSW52ZXN0ZWQgXG4gICAgfSk7XG5cbiAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSAoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9GaXhlZCgwKTtcbiAgICBsb2cuaW5mbyhgPT09IFBhcnNpbmcgY29tcGxldGUgaW4gJHtkdXJhdGlvbn1tcyA9PT1gKTtcbiAgICBsb2cuaW5mbygnUmVzdWx0cycsIHsgXG4gICAgICBmdW5kczogZGF0YS5mdW5kcy5sZW5ndGgsIFxuICAgICAgdG90YWxWYWx1ZTogYOKCuSR7ZGF0YS50b3RhbFZhbHVlLnRvTG9jYWxlU3RyaW5nKCdlbi1JTicpfWAgXG4gICAgfSk7XG5cbiAgICBpZiAoZGF0YS5mdW5kcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGxvZy53YXJuKCdObyBmdW5kcyBmb3VuZCBpbiBwYXJzZWQgZGF0YScpO1xuICAgICAgbG9nLmRlYnVnKCdGaXJzdCAxMDAwIGNoYXJzIG9mIGV4dHJhY3RlZCB0ZXh0OicsIHRleHQuc3Vic3RyaW5nKDAsIDEwMDApKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZnVuZHMgZm91bmQgaW4gQ0FTLiBQbGVhc2UgY2hlY2sgdGhlIGZpbGUgZm9ybWF0IGFuZCBwYXNzd29yZC4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBsb2cuZXJyb3IoYD09PSBQYXJzaW5nIGZhaWxlZCBhZnRlciAkeyhlbmRUaW1lIC0gc3RhcnRUaW1lKS50b0ZpeGVkKDApfW1zID09PWApO1xuICAgIGxvZy5lcnJvcignRXJyb3IgaW4gcGFyc2VDQVNGaWxlJywgZXJyb3IpO1xuICAgIGxvZy5lcnJvcignRXJyb3IgdHlwZScsIHsgXG4gICAgICBuYW1lOiBlcnJvcj8ubmFtZSwgXG4gICAgICBtZXNzYWdlOiBlcnJvcj8ubWVzc2FnZSxcbiAgICAgIGlzRXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmUtdGhyb3cgd2l0aCBwcm9wZXIgZXJyb3IgbWVzc2FnZVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgQ0FTIFBERi4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInBkZmpzTGliIiwiR2xvYmFsV29ya2VyT3B0aW9ucyIsIndvcmtlclNyYyIsIlVSTCIsInVybCIsInRvU3RyaW5nIiwibG9nIiwiaW5mbyIsIm1zZyIsImRhdGEiLCJjb25zb2xlIiwidW5kZWZpbmVkIiwiZXJyb3IiLCJzdGFjayIsImRlYnVnIiwid2FybiIsImV4dHJhY3RUZXh0RnJvbVBERiIsImZpbGUiLCJwYXNzd29yZCIsImZpbGVOYW1lIiwibmFtZSIsImZpbGVTaXplIiwic2l6ZSIsImZpbGVUeXBlIiwidHlwZSIsImFycmF5QnVmZmVyIiwiYnl0ZUxlbmd0aCIsInBhc3N3b3JkU3RyIiwiaGFzUGFzc3dvcmQiLCJsZW5ndGgiLCJsb2FkaW5nVGFzayIsImdldERvY3VtZW50IiwicGFzc3dvcmRBdHRlbXB0ZWQiLCJvblBhc3N3b3JkIiwidXBkYXRlUGFzc3dvcmQiLCJyZWFzb24iLCJlcnIiLCJwZGYiLCJwcm9taXNlIiwibnVtUGFnZXMiLCJmdWxsVGV4dCIsImkiLCJwYWdlIiwiZ2V0UGFnZSIsInRleHRDb250ZW50IiwiZ2V0VGV4dENvbnRlbnQiLCJwYWdlVGV4dCIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInN0ciIsImpvaW4iLCJ0ZXh0TGVuZ3RoIiwidG90YWxUZXh0TGVuZ3RoIiwibWVzc2FnZSIsImNvZGUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiRXJyb3IiLCJwYXJzZUNBU1RleHQiLCJ0ZXh0IiwiZnVuZHMiLCJ0b3RhbFZhbHVlIiwidG90YWxJbnZlc3RlZCIsImZ1bmRQYXR0ZXJuIiwiZm9saW9fcGF0dGVybiIsImFtY19wYXR0ZXJuIiwibGluZXMiLCJzcGxpdCIsImxpbmUiLCJtYXRjaCIsIm5hbWVNYXRjaCIsInRyaW0iLCJwbGFuTWF0Y2giLCJwbGFuVHlwZSIsInZhbHVlTWF0Y2giLCJjdXJyZW50VmFsdWUiLCJwYXJzZUZsb2F0IiwicmVwbGFjZSIsImludmVzdGVkQW1vdW50IiwiZm9saW9NYXRjaCIsInNsaWNlIiwiTWF0aCIsIm1heCIsInJldmVyc2UiLCJmaW5kIiwibCIsImZvbGlvIiwic3Vic3RyaW5nIiwiYW1jTWF0Y2giLCJhbWMiLCJwdXNoIiwidmFsdWUiLCJpbnZlc3RlZCIsImUiLCJwYXJzZUNBU0ZpbGUiLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImZ1bmRzQ291bnQiLCJlbmRUaW1lIiwiZHVyYXRpb24iLCJ0b0ZpeGVkIiwidG9Mb2NhbGVTdHJpbmciLCJpc0Vycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/pdfParser.ts\n");

/***/ })

};
;