"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_src_lib_pdfParser_ts";
exports.ids = ["_ssr_src_lib_pdfParser_ts"];
exports.modules = {

/***/ "(ssr)/./src/lib/pdfParser.ts":
/*!******************************!*\
  !*** ./src/lib/pdfParser.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseCASFile: () => (/* binding */ parseCASFile)\n/* harmony export */ });\n/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdfjs-dist */ \"(ssr)/../node_modules/pdfjs-dist/build/pdf.mjs\");\n\n// Set worker source to match the installed pdfjs-dist version (4.10.38)\npdfjs_dist__WEBPACK_IMPORTED_MODULE_0__.GlobalWorkerOptions.workerSrc = \"https://unpkg.com/pdfjs-dist@4.10.38/build/pdf.worker.min.mjs\";\n// Detailed logging helper\nconst log = {\n    info: (msg, data)=>{\n        console.log(`[PDF-PARSER] INFO: ${msg}`, data !== undefined ? data : \"\");\n    },\n    error: (msg, error)=>{\n        console.error(`[PDF-PARSER] ERROR: ${msg}`, error !== undefined ? error : \"\");\n        if (error?.stack) console.error(`[PDF-PARSER] Stack:`, error.stack);\n    },\n    debug: (msg, data)=>{\n        console.log(`[PDF-PARSER] DEBUG: ${msg}`, data !== undefined ? data : \"\");\n    },\n    warn: (msg, data)=>{\n        console.warn(`[PDF-PARSER] WARN: ${msg}`, data !== undefined ? data : \"\");\n    }\n};\nasync function extractTextFromPDF(file, password) {\n    log.info(\"Starting PDF text extraction\", {\n        fileName: file.name,\n        fileSize: file.size,\n        fileType: file.type\n    });\n    try {\n        log.debug(\"Converting file to ArrayBuffer...\");\n        const arrayBuffer = await file.arrayBuffer();\n        log.debug(\"ArrayBuffer created\", {\n            byteLength: arrayBuffer.byteLength\n        });\n        log.debug(\"PDF.js worker source:\", pdfjs_dist__WEBPACK_IMPORTED_MODULE_0__.GlobalWorkerOptions.workerSrc);\n        log.info(\"Loading PDF document with password...\");\n        // PDF.js can accept password as string or Uint8Array\n        // Try with string first, then handle password callback for encrypted PDFs\n        const passwordStr = password || \"\";\n        log.debug(\"Preparing password for PDF.js\", {\n            hasPassword: passwordStr.length > 0\n        });\n        const loadingTask = pdfjs_dist__WEBPACK_IMPORTED_MODULE_0__.getDocument({\n            data: arrayBuffer,\n            password: passwordStr\n        });\n        // Handle password-protected PDF - set callback to provide password if needed\n        let passwordAttempted = false;\n        loadingTask.onPassword = (updatePassword, reason)=>{\n            log.debug(\"PDF password callback triggered\", {\n                reason,\n                passwordAttempted\n            });\n            // Reason: 1 = user password, 2 = owner password\n            if (!passwordAttempted && passwordStr) {\n                passwordAttempted = true;\n                try {\n                    // Try updating with the provided password\n                    updatePassword(passwordStr);\n                } catch (err) {\n                    log.error(\"Error calling updatePassword\", err);\n                }\n            }\n        };\n        log.debug(\"PDF loading task created, awaiting promise...\");\n        const pdf = await loadingTask.promise;\n        log.info(\"PDF loaded successfully\", {\n            numPages: pdf.numPages\n        });\n        let fullText = \"\";\n        for(let i = 1; i <= pdf.numPages; i++){\n            log.debug(`Extracting text from page ${i}/${pdf.numPages}...`);\n            const page = await pdf.getPage(i);\n            const textContent = await page.getTextContent();\n            const pageText = textContent.items.map((item)=>item.str).join(\" \");\n            fullText += pageText + \"\\n\";\n            log.debug(`Page ${i} extracted`, {\n                textLength: pageText.length\n            });\n        }\n        log.info(\"PDF text extraction complete\", {\n            totalTextLength: fullText.length\n        });\n        return fullText;\n    } catch (error) {\n        log.error(\"PDF extraction failed\", error);\n        log.error(\"Error details\", {\n            name: error?.name,\n            message: error?.message,\n            code: error?.code\n        });\n        // More specific error messages based on PDF.js error types\n        if (error?.name === \"PasswordException\" || error?.message?.toLowerCase().includes(\"password\")) {\n            throw new Error(\"Incorrect password. Please check and try again.\");\n        } else if (error?.name === \"InvalidPDFException\" || error?.message?.includes(\"Invalid PDF\")) {\n            throw new Error(\"Invalid PDF file. Please upload a valid CAS PDF.\");\n        } else if (error?.message?.includes(\"worker\")) {\n            throw new Error(\"PDF processing failed. Please refresh and try again.\");\n        } else if (error?.message?.includes(\"encrypted\") || error?.message?.includes(\"Encrypted\")) {\n            throw new Error(\"Incorrect password. Please check and try again.\");\n        }\n        throw new Error(`Failed to extract PDF text: ${error?.message || \"Unknown error\"}`);\n    }\n}\nfunction parseCASText(text) {\n    const funds = [];\n    let totalValue = 0;\n    let totalInvested = 0;\n    // Regex patterns for CAS format\n    const fundPattern = /([A-Za-z\\s\\-&()]+?)\\s+(?:ISIN:|Growth|Dividend)\\s+([A-Z0-9]{12})?[\\s\\S]*?(?:Plan:|Direct|Regular)\\s+(Direct|Regular)[\\s\\S]*?₹\\s+([\\d,]+\\.?\\d*)\\s+₹\\s+([\\d,]+\\.?\\d*)/gi;\n    const folio_pattern = /Folio\\s+([A-Z0-9\\s/\\-]+?)\\s+(?=Folio|Account|Statement|$)/i;\n    const amc_pattern = /(ICICI|HDFC|Axis|SBI|Motilal|Franklin|Kotak|DSP|L&T|Aditya Birla|Nippon|JM Financial|IDFC|Canara|HDFC Life|LIC)/i;\n    const lines = text.split(\"\\n\");\n    for(let i = 0; i < lines.length; i++){\n        const line = lines[i];\n        // Try to match fund entry\n        if (line.match(/ISIN:|Growth|Dividend/) && line.match(/Direct|Regular/)) {\n            try {\n                // Extract fund name\n                const nameMatch = line.match(/^([A-Za-z\\s\\-&()]+?)\\s+(?:ISIN:|Growth|Dividend)/);\n                const name = nameMatch ? nameMatch[1].trim() : \"Unknown Fund\";\n                // Extract plan type\n                const planMatch = line.match(/(Direct|Regular)/);\n                const planType = planMatch ? planMatch[1] : \"Regular\";\n                // Extract current value and invested amount\n                const valueMatch = line.match(/₹\\s+([\\d,]+\\.?\\d*)/g);\n                if (valueMatch && valueMatch.length >= 2) {\n                    const currentValue = parseFloat(valueMatch[valueMatch.length - 1].replace(/₹\\s+/, \"\").replace(/,/g, \"\"));\n                    const investedAmount = parseFloat(valueMatch[0].replace(/₹\\s+/, \"\").replace(/,/g, \"\"));\n                    // Extract folio\n                    const folioMatch = lines.slice(Math.max(0, i - 5), i).reverse().find((l)=>l.match(/[A-Z0-9\\/\\-]{10,}/));\n                    const folio = folioMatch ? folioMatch.trim().substring(0, 20) : \"N/A\";\n                    // Guess AMC from fund name\n                    const amcMatch = name.match(/(ICICI|HDFC|Axis|SBI|Motilal|Franklin|Kotak|DSP|L&T|Aditya|Nippon|JM|IDFC|Canara|LIC)/i);\n                    const amc = amcMatch ? amcMatch[1] : \"Unknown\";\n                    if (currentValue > 0) {\n                        funds.push({\n                            name,\n                            folio,\n                            value: currentValue,\n                            invested: investedAmount,\n                            planType,\n                            amc\n                        });\n                        totalValue += currentValue;\n                        totalInvested += investedAmount;\n                    }\n                }\n            } catch (e) {\n            // Continue parsing\n            }\n        }\n    }\n    return {\n        funds,\n        totalValue,\n        totalInvested\n    };\n}\nasync function parseCASFile(file, password) {\n    log.info(\"=== Starting CAS file parsing ===\");\n    log.info(\"File details\", {\n        name: file.name,\n        size: file.size,\n        type: file.type\n    });\n    const startTime = performance.now();\n    try {\n        log.info(\"Step 1: Extracting text from PDF...\");\n        const text = await extractTextFromPDF(file, password);\n        log.info(\"Step 1 complete: Text extracted\", {\n            textLength: text.length\n        });\n        log.info(\"Step 2: Parsing CAS text for funds...\");\n        const data = parseCASText(text);\n        log.info(\"Step 2 complete: Text parsed\", {\n            fundsCount: data.funds.length,\n            totalValue: data.totalValue,\n            totalInvested: data.totalInvested\n        });\n        const endTime = performance.now();\n        const duration = (endTime - startTime).toFixed(0);\n        log.info(`=== Parsing complete in ${duration}ms ===`);\n        log.info(\"Results\", {\n            funds: data.funds.length,\n            totalValue: `₹${data.totalValue.toLocaleString(\"en-IN\")}`\n        });\n        if (data.funds.length === 0) {\n            log.warn(\"No funds found in parsed data\");\n            log.debug(\"First 1000 chars of extracted text:\", text.substring(0, 1000));\n            throw new Error(\"No funds found in CAS. Please check the file format and password.\");\n        }\n        return data;\n    } catch (error) {\n        const endTime = performance.now();\n        log.error(`=== Parsing failed after ${(endTime - startTime).toFixed(0)}ms ===`);\n        log.error(\"Error in parseCASFile\", error);\n        log.error(\"Error type\", {\n            name: error?.name,\n            message: error?.message,\n            isError: error instanceof Error\n        });\n        // Re-throw with proper error message\n        if (error instanceof Error) {\n            throw error;\n        }\n        throw new Error(\"Failed to parse CAS PDF. Please try again.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWE7UUFDbkM7UUFFQSxNQUFNcUMsVUFBVUgsWUFBWUMsR0FBRztRQUMvQixNQUFNRyxXQUFXLENBQUNELFVBQVVKLFNBQVEsRUFBR00sT0FBTyxDQUFDO1FBQy9DaEcsSUFBSUMsSUFBSSxDQUFDLENBQUMsd0JBQXdCLEVBQUU4RixTQUFTLE1BQU0sQ0FBQztRQUNwRC9GLElBQUlDLElBQUksQ0FBQyxXQUFXO1lBQ2xCc0QsT0FBT3BELEtBQUtvRCxLQUFLLENBQUNoQyxNQUFNO1lBQ3hCaUMsWUFBWSxDQUFDLENBQUMsRUFBRXJELEtBQUtxRCxVQUFVLENBQUN5QyxjQUFjLENBQUMsU0FBUyxDQUFDO1FBQzNEO1FBRUEsSUFBSTlGLEtBQUtvRCxLQUFLLENBQUNoQyxNQUFNLEtBQUssR0FBRztZQUMzQnZCLElBQUlTLElBQUksQ0FBQztZQUNUVCxJQUFJUSxLQUFLLENBQUMsdUNBQXVDOEMsS0FBSzRCLFNBQVMsQ0FBQyxHQUFHO1lBQ25FLE1BQU0sSUFBSTlCLE1BQU07UUFDbEI7UUFFQSxPQUFPakQ7SUFDVCxFQUFFLE9BQU9HLE9BQVk7UUFDbkIsTUFBTXdGLFVBQVVILFlBQVlDLEdBQUc7UUFDL0I1RixJQUFJTSxLQUFLLENBQUMsQ0FBQyx5QkFBeUIsRUFBRSxDQUFDd0YsVUFBVUosU0FBUSxFQUFHTSxPQUFPLENBQUMsR0FBRyxNQUFNLENBQUM7UUFDOUVoRyxJQUFJTSxLQUFLLENBQUMseUJBQXlCQTtRQUNuQ04sSUFBSU0sS0FBSyxDQUFDLGNBQWM7WUFDdEJRLE1BQU1SLE9BQU9RO1lBQ2JrQyxTQUFTMUMsT0FBTzBDO1lBQ2hCa0QsU0FBUzVGLGlCQUFpQjhDO1FBQzVCO1FBRUEscUNBQXFDO1FBQ3JDLElBQUk5QyxpQkFBaUI4QyxPQUFPO1lBQzFCLE1BQU05QztRQUNSO1FBQ0EsTUFBTSxJQUFJOEMsTUFBTTtJQUNsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnJvbnRlbmQvLi9zcmMvbGliL3BkZlBhcnNlci50cz9iNTlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHBkZmpzTGliIGZyb20gJ3BkZmpzLWRpc3QnO1xuXG4vLyBTZXQgd29ya2VyIHNvdXJjZSB0byBtYXRjaCB0aGUgaW5zdGFsbGVkIHBkZmpzLWRpc3QgdmVyc2lvbiAoNC4xMC4zOClcbnBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjID0gJ2h0dHBzOi8vdW5wa2cuY29tL3BkZmpzLWRpc3RANC4xMC4zOC9idWlsZC9wZGYud29ya2VyLm1pbi5tanMnO1xuXG4vLyBEZXRhaWxlZCBsb2dnaW5nIGhlbHBlclxuY29uc3QgbG9nID0ge1xuICBpbmZvOiAobXNnOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgW1BERi1QQVJTRVJdIElORk86ICR7bXNnfWAsIGRhdGEgIT09IHVuZGVmaW5lZCA/IGRhdGEgOiAnJyk7XG4gIH0sXG4gIGVycm9yOiAobXNnOiBzdHJpbmcsIGVycm9yPzogYW55KSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihgW1BERi1QQVJTRVJdIEVSUk9SOiAke21zZ31gLCBlcnJvciAhPT0gdW5kZWZpbmVkID8gZXJyb3IgOiAnJyk7XG4gICAgaWYgKGVycm9yPy5zdGFjaykgY29uc29sZS5lcnJvcihgW1BERi1QQVJTRVJdIFN0YWNrOmAsIGVycm9yLnN0YWNrKTtcbiAgfSxcbiAgZGVidWc6IChtc2c6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBbUERGLVBBUlNFUl0gREVCVUc6ICR7bXNnfWAsIGRhdGEgIT09IHVuZGVmaW5lZCA/IGRhdGEgOiAnJyk7XG4gIH0sXG4gIHdhcm46IChtc2c6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xuICAgIGNvbnNvbGUud2FybihgW1BERi1QQVJTRVJdIFdBUk46ICR7bXNnfWAsIGRhdGEgIT09IHVuZGVmaW5lZCA/IGRhdGEgOiAnJyk7XG4gIH1cbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXh0cmFjdGVkRnVuZCB7XG4gIG5hbWU6IHN0cmluZztcbiAgZm9saW86IHN0cmluZztcbiAgdmFsdWU6IG51bWJlcjtcbiAgaW52ZXN0ZWQ6IG51bWJlcjtcbiAgcGxhblR5cGU6IHN0cmluZztcbiAgYW1jOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VkQ0FTRGF0YSB7XG4gIGZ1bmRzOiBFeHRyYWN0ZWRGdW5kW107XG4gIHRvdGFsVmFsdWU6IG51bWJlcjtcbiAgdG90YWxJbnZlc3RlZDogbnVtYmVyO1xufVxuXG5hc3luYyBmdW5jdGlvbiBleHRyYWN0VGV4dEZyb21QREYoZmlsZTogRmlsZSwgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGxvZy5pbmZvKCdTdGFydGluZyBQREYgdGV4dCBleHRyYWN0aW9uJywgeyBmaWxlTmFtZTogZmlsZS5uYW1lLCBmaWxlU2l6ZTogZmlsZS5zaXplLCBmaWxlVHlwZTogZmlsZS50eXBlIH0pO1xuICBcbiAgdHJ5IHtcbiAgICBsb2cuZGVidWcoJ0NvbnZlcnRpbmcgZmlsZSB0byBBcnJheUJ1ZmZlci4uLicpO1xuICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgIGxvZy5kZWJ1ZygnQXJyYXlCdWZmZXIgY3JlYXRlZCcsIHsgYnl0ZUxlbmd0aDogYXJyYXlCdWZmZXIuYnl0ZUxlbmd0aCB9KTtcbiAgICBcbiAgICBsb2cuZGVidWcoJ1BERi5qcyB3b3JrZXIgc291cmNlOicsIHBkZmpzTGliLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjKTtcbiAgICBsb2cuaW5mbygnTG9hZGluZyBQREYgZG9jdW1lbnQgd2l0aCBwYXNzd29yZC4uLicpO1xuICAgIFxuICAgIC8vIFBERi5qcyBjYW4gYWNjZXB0IHBhc3N3b3JkIGFzIHN0cmluZyBvciBVaW50OEFycmF5XG4gICAgLy8gVHJ5IHdpdGggc3RyaW5nIGZpcnN0LCB0aGVuIGhhbmRsZSBwYXNzd29yZCBjYWxsYmFjayBmb3IgZW5jcnlwdGVkIFBERnNcbiAgICBjb25zdCBwYXNzd29yZFN0ciA9IHBhc3N3b3JkIHx8ICcnO1xuICAgIGxvZy5kZWJ1ZygnUHJlcGFyaW5nIHBhc3N3b3JkIGZvciBQREYuanMnLCB7IGhhc1Bhc3N3b3JkOiBwYXNzd29yZFN0ci5sZW5ndGggPiAwIH0pO1xuICAgIFxuICAgIGNvbnN0IGxvYWRpbmdUYXNrID0gcGRmanNMaWIuZ2V0RG9jdW1lbnQoe1xuICAgICAgZGF0YTogYXJyYXlCdWZmZXIsXG4gICAgICBwYXNzd29yZDogcGFzc3dvcmRTdHIsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIHBhc3N3b3JkLXByb3RlY3RlZCBQREYgLSBzZXQgY2FsbGJhY2sgdG8gcHJvdmlkZSBwYXNzd29yZCBpZiBuZWVkZWRcbiAgICBsZXQgcGFzc3dvcmRBdHRlbXB0ZWQgPSBmYWxzZTtcbiAgICBsb2FkaW5nVGFzay5vblBhc3N3b3JkID0gKHVwZGF0ZVBhc3N3b3JkOiBGdW5jdGlvbiwgcmVhc29uOiBudW1iZXIpID0+IHtcbiAgICAgIGxvZy5kZWJ1ZygnUERGIHBhc3N3b3JkIGNhbGxiYWNrIHRyaWdnZXJlZCcsIHsgcmVhc29uLCBwYXNzd29yZEF0dGVtcHRlZCB9KTtcbiAgICAgIC8vIFJlYXNvbjogMSA9IHVzZXIgcGFzc3dvcmQsIDIgPSBvd25lciBwYXNzd29yZFxuICAgICAgaWYgKCFwYXNzd29yZEF0dGVtcHRlZCAmJiBwYXNzd29yZFN0cikge1xuICAgICAgICBwYXNzd29yZEF0dGVtcHRlZCA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVHJ5IHVwZGF0aW5nIHdpdGggdGhlIHByb3ZpZGVkIHBhc3N3b3JkXG4gICAgICAgICAgdXBkYXRlUGFzc3dvcmQocGFzc3dvcmRTdHIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBsb2cuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgdXBkYXRlUGFzc3dvcmQnLCBlcnIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBsb2cuZGVidWcoJ1BERiBsb2FkaW5nIHRhc2sgY3JlYXRlZCwgYXdhaXRpbmcgcHJvbWlzZS4uLicpO1xuICAgIGNvbnN0IHBkZiA9IGF3YWl0IGxvYWRpbmdUYXNrLnByb21pc2U7XG4gICAgbG9nLmluZm8oJ1BERiBsb2FkZWQgc3VjY2Vzc2Z1bGx5JywgeyBudW1QYWdlczogcGRmLm51bVBhZ2VzIH0pO1xuXG4gICAgbGV0IGZ1bGxUZXh0ID0gJyc7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwZGYubnVtUGFnZXM7IGkrKykge1xuICAgICAgbG9nLmRlYnVnKGBFeHRyYWN0aW5nIHRleHQgZnJvbSBwYWdlICR7aX0vJHtwZGYubnVtUGFnZXN9Li4uYCk7XG4gICAgICBjb25zdCBwYWdlID0gYXdhaXQgcGRmLmdldFBhZ2UoaSk7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IGF3YWl0IHBhZ2UuZ2V0VGV4dENvbnRlbnQoKTtcbiAgICAgIGNvbnN0IHBhZ2VUZXh0ID0gdGV4dENvbnRlbnQuaXRlbXNcbiAgICAgICAgLm1hcCgoaXRlbTogYW55KSA9PiBpdGVtLnN0cilcbiAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgIGZ1bGxUZXh0ICs9IHBhZ2VUZXh0ICsgJ1xcbic7XG4gICAgICBsb2cuZGVidWcoYFBhZ2UgJHtpfSBleHRyYWN0ZWRgLCB7IHRleHRMZW5ndGg6IHBhZ2VUZXh0Lmxlbmd0aCB9KTtcbiAgICB9XG5cbiAgICBsb2cuaW5mbygnUERGIHRleHQgZXh0cmFjdGlvbiBjb21wbGV0ZScsIHsgdG90YWxUZXh0TGVuZ3RoOiBmdWxsVGV4dC5sZW5ndGggfSk7XG4gICAgcmV0dXJuIGZ1bGxUZXh0O1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgbG9nLmVycm9yKCdQREYgZXh0cmFjdGlvbiBmYWlsZWQnLCBlcnJvcik7XG4gICAgbG9nLmVycm9yKCdFcnJvciBkZXRhaWxzJywgeyBcbiAgICAgIG5hbWU6IGVycm9yPy5uYW1lLCBcbiAgICAgIG1lc3NhZ2U6IGVycm9yPy5tZXNzYWdlLFxuICAgICAgY29kZTogZXJyb3I/LmNvZGVcbiAgICB9KTtcbiAgICBcbiAgICAvLyBNb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2VzIGJhc2VkIG9uIFBERi5qcyBlcnJvciB0eXBlc1xuICAgIGlmIChlcnJvcj8ubmFtZSA9PT0gJ1Bhc3N3b3JkRXhjZXB0aW9uJyB8fCBlcnJvcj8ubWVzc2FnZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncGFzc3dvcmQnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQuIFBsZWFzZSBjaGVjayBhbmQgdHJ5IGFnYWluLicpO1xuICAgIH0gZWxzZSBpZiAoZXJyb3I/Lm5hbWUgPT09ICdJbnZhbGlkUERGRXhjZXB0aW9uJyB8fCBlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ0ludmFsaWQgUERGJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBQREYgZmlsZS4gUGxlYXNlIHVwbG9hZCBhIHZhbGlkIENBUyBQREYuJyk7XG4gICAgfSBlbHNlIGlmIChlcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ3dvcmtlcicpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BERiBwcm9jZXNzaW5nIGZhaWxlZC4gUGxlYXNlIHJlZnJlc2ggYW5kIHRyeSBhZ2Fpbi4nKTtcbiAgICB9IGVsc2UgaWYgKGVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnZW5jcnlwdGVkJykgfHwgZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdFbmNyeXB0ZWQnKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbmNvcnJlY3QgcGFzc3dvcmQuIFBsZWFzZSBjaGVjayBhbmQgdHJ5IGFnYWluLicpO1xuICAgIH1cbiAgICBcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBleHRyYWN0IFBERiB0ZXh0OiAke2Vycm9yPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwYXJzZUNBU1RleHQodGV4dDogc3RyaW5nKTogUGFyc2VkQ0FTRGF0YSB7XG4gIGNvbnN0IGZ1bmRzOiBFeHRyYWN0ZWRGdW5kW10gPSBbXTtcbiAgbGV0IHRvdGFsVmFsdWUgPSAwO1xuICBsZXQgdG90YWxJbnZlc3RlZCA9IDA7XG5cbiAgLy8gUmVnZXggcGF0dGVybnMgZm9yIENBUyBmb3JtYXRcbiAgY29uc3QgZnVuZFBhdHRlcm4gPSAvKFtBLVphLXpcXHNcXC0mKCldKz8pXFxzKyg/OklTSU46fEdyb3d0aHxEaXZpZGVuZClcXHMrKFtBLVowLTldezEyfSk/W1xcc1xcU10qPyg/OlBsYW46fERpcmVjdHxSZWd1bGFyKVxccysoRGlyZWN0fFJlZ3VsYXIpW1xcc1xcU10qP+KCuVxccysoW1xcZCxdK1xcLj9cXGQqKVxccyvigrlcXHMrKFtcXGQsXStcXC4/XFxkKikvZ2k7XG4gIFxuICBjb25zdCBmb2xpb19wYXR0ZXJuID0gL0ZvbGlvXFxzKyhbQS1aMC05XFxzL1xcLV0rPylcXHMrKD89Rm9saW98QWNjb3VudHxTdGF0ZW1lbnR8JCkvaTtcbiAgY29uc3QgYW1jX3BhdHRlcm4gPSAvKElDSUNJfEhERkN8QXhpc3xTQkl8TW90aWxhbHxGcmFua2xpbnxLb3Rha3xEU1B8TCZUfEFkaXR5YSBCaXJsYXxOaXBwb258Sk0gRmluYW5jaWFsfElERkN8Q2FuYXJhfEhERkMgTGlmZXxMSUMpL2k7XG5cbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuXG4gICAgLy8gVHJ5IHRvIG1hdGNoIGZ1bmQgZW50cnlcbiAgICBpZiAobGluZS5tYXRjaCgvSVNJTjp8R3Jvd3RofERpdmlkZW5kLykgJiYgbGluZS5tYXRjaCgvRGlyZWN0fFJlZ3VsYXIvKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRXh0cmFjdCBmdW5kIG5hbWVcbiAgICAgICAgY29uc3QgbmFtZU1hdGNoID0gbGluZS5tYXRjaCgvXihbQS1aYS16XFxzXFwtJigpXSs/KVxccysoPzpJU0lOOnxHcm93dGh8RGl2aWRlbmQpLyk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBuYW1lTWF0Y2ggPyBuYW1lTWF0Y2hbMV0udHJpbSgpIDogJ1Vua25vd24gRnVuZCc7XG5cbiAgICAgICAgLy8gRXh0cmFjdCBwbGFuIHR5cGVcbiAgICAgICAgY29uc3QgcGxhbk1hdGNoID0gbGluZS5tYXRjaCgvKERpcmVjdHxSZWd1bGFyKS8pO1xuICAgICAgICBjb25zdCBwbGFuVHlwZSA9IHBsYW5NYXRjaCA/IHBsYW5NYXRjaFsxXSA6ICdSZWd1bGFyJztcblxuICAgICAgICAvLyBFeHRyYWN0IGN1cnJlbnQgdmFsdWUgYW5kIGludmVzdGVkIGFtb3VudFxuICAgICAgICBjb25zdCB2YWx1ZU1hdGNoID0gbGluZS5tYXRjaCgv4oK5XFxzKyhbXFxkLF0rXFwuP1xcZCopL2cpO1xuICAgICAgICBpZiAodmFsdWVNYXRjaCAmJiB2YWx1ZU1hdGNoLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZU1hdGNoW3ZhbHVlTWF0Y2gubGVuZ3RoIC0gMV0ucmVwbGFjZSgv4oK5XFxzKy8sICcnKS5yZXBsYWNlKC8sL2csICcnKSk7XG4gICAgICAgICAgY29uc3QgaW52ZXN0ZWRBbW91bnQgPSBwYXJzZUZsb2F0KHZhbHVlTWF0Y2hbMF0ucmVwbGFjZSgv4oK5XFxzKy8sICcnKS5yZXBsYWNlKC8sL2csICcnKSk7XG5cbiAgICAgICAgICAvLyBFeHRyYWN0IGZvbGlvXG4gICAgICAgICAgY29uc3QgZm9saW9NYXRjaCA9IGxpbmVzLnNsaWNlKE1hdGgubWF4KDAsIGkgLSA1KSwgaSkucmV2ZXJzZSgpLmZpbmQobCA9PiBsLm1hdGNoKC9bQS1aMC05XFwvXFwtXXsxMCx9LykpO1xuICAgICAgICAgIGNvbnN0IGZvbGlvID0gZm9saW9NYXRjaCA/IGZvbGlvTWF0Y2gudHJpbSgpLnN1YnN0cmluZygwLCAyMCkgOiAnTi9BJztcblxuICAgICAgICAgIC8vIEd1ZXNzIEFNQyBmcm9tIGZ1bmQgbmFtZVxuICAgICAgICAgIGNvbnN0IGFtY01hdGNoID0gbmFtZS5tYXRjaCgvKElDSUNJfEhERkN8QXhpc3xTQkl8TW90aWxhbHxGcmFua2xpbnxLb3Rha3xEU1B8TCZUfEFkaXR5YXxOaXBwb258Sk18SURGQ3xDYW5hcmF8TElDKS9pKTtcbiAgICAgICAgICBjb25zdCBhbWMgPSBhbWNNYXRjaCA/IGFtY01hdGNoWzFdIDogJ1Vua25vd24nO1xuXG4gICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA+IDApIHtcbiAgICAgICAgICAgIGZ1bmRzLnB1c2goe1xuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBmb2xpbyxcbiAgICAgICAgICAgICAgdmFsdWU6IGN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICAgICAgaW52ZXN0ZWQ6IGludmVzdGVkQW1vdW50LFxuICAgICAgICAgICAgICBwbGFuVHlwZSxcbiAgICAgICAgICAgICAgYW1jLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRvdGFsVmFsdWUgKz0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgdG90YWxJbnZlc3RlZCArPSBpbnZlc3RlZEFtb3VudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gQ29udGludWUgcGFyc2luZ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZnVuZHMsXG4gICAgdG90YWxWYWx1ZSxcbiAgICB0b3RhbEludmVzdGVkLFxuICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGFyc2VDQVNGaWxlKGZpbGU6IEZpbGUsIHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPFBhcnNlZENBU0RhdGE+IHtcbiAgbG9nLmluZm8oJz09PSBTdGFydGluZyBDQVMgZmlsZSBwYXJzaW5nID09PScpO1xuICBsb2cuaW5mbygnRmlsZSBkZXRhaWxzJywgeyBuYW1lOiBmaWxlLm5hbWUsIHNpemU6IGZpbGUuc2l6ZSwgdHlwZTogZmlsZS50eXBlIH0pO1xuICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcblxuICB0cnkge1xuICAgIGxvZy5pbmZvKCdTdGVwIDE6IEV4dHJhY3RpbmcgdGV4dCBmcm9tIFBERi4uLicpO1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCBleHRyYWN0VGV4dEZyb21QREYoZmlsZSwgcGFzc3dvcmQpO1xuICAgIGxvZy5pbmZvKCdTdGVwIDEgY29tcGxldGU6IFRleHQgZXh0cmFjdGVkJywgeyB0ZXh0TGVuZ3RoOiB0ZXh0Lmxlbmd0aCB9KTtcbiAgICBcbiAgICBsb2cuaW5mbygnU3RlcCAyOiBQYXJzaW5nIENBUyB0ZXh0IGZvciBmdW5kcy4uLicpO1xuICAgIGNvbnN0IGRhdGEgPSBwYXJzZUNBU1RleHQodGV4dCk7XG4gICAgbG9nLmluZm8oJ1N0ZXAgMiBjb21wbGV0ZTogVGV4dCBwYXJzZWQnLCB7IFxuICAgICAgZnVuZHNDb3VudDogZGF0YS5mdW5kcy5sZW5ndGgsIFxuICAgICAgdG90YWxWYWx1ZTogZGF0YS50b3RhbFZhbHVlLFxuICAgICAgdG90YWxJbnZlc3RlZDogZGF0YS50b3RhbEludmVzdGVkIFxuICAgIH0pO1xuXG4gICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gKGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvRml4ZWQoMCk7XG4gICAgbG9nLmluZm8oYD09PSBQYXJzaW5nIGNvbXBsZXRlIGluICR7ZHVyYXRpb259bXMgPT09YCk7XG4gICAgbG9nLmluZm8oJ1Jlc3VsdHMnLCB7IFxuICAgICAgZnVuZHM6IGRhdGEuZnVuZHMubGVuZ3RoLCBcbiAgICAgIHRvdGFsVmFsdWU6IGDigrkke2RhdGEudG90YWxWYWx1ZS50b0xvY2FsZVN0cmluZygnZW4tSU4nKX1gIFxuICAgIH0pO1xuXG4gICAgaWYgKGRhdGEuZnVuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBsb2cud2FybignTm8gZnVuZHMgZm91bmQgaW4gcGFyc2VkIGRhdGEnKTtcbiAgICAgIGxvZy5kZWJ1ZygnRmlyc3QgMTAwMCBjaGFycyBvZiBleHRyYWN0ZWQgdGV4dDonLCB0ZXh0LnN1YnN0cmluZygwLCAxMDAwKSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGZ1bmRzIGZvdW5kIGluIENBUy4gUGxlYXNlIGNoZWNrIHRoZSBmaWxlIGZvcm1hdCBhbmQgcGFzc3dvcmQuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgbG9nLmVycm9yKGA9PT0gUGFyc2luZyBmYWlsZWQgYWZ0ZXIgJHsoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9GaXhlZCgwKX1tcyA9PT1gKTtcbiAgICBsb2cuZXJyb3IoJ0Vycm9yIGluIHBhcnNlQ0FTRmlsZScsIGVycm9yKTtcbiAgICBsb2cuZXJyb3IoJ0Vycm9yIHR5cGUnLCB7IFxuICAgICAgbmFtZTogZXJyb3I/Lm5hbWUsIFxuICAgICAgbWVzc2FnZTogZXJyb3I/Lm1lc3NhZ2UsXG4gICAgICBpc0Vycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yIFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFJlLXRocm93IHdpdGggcHJvcGVyIGVycm9yIG1lc3NhZ2VcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIENBUyBQREYuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJwZGZqc0xpYiIsIkdsb2JhbFdvcmtlck9wdGlvbnMiLCJ3b3JrZXJTcmMiLCJsb2ciLCJpbmZvIiwibXNnIiwiZGF0YSIsImNvbnNvbGUiLCJ1bmRlZmluZWQiLCJlcnJvciIsInN0YWNrIiwiZGVidWciLCJ3YXJuIiwiZXh0cmFjdFRleHRGcm9tUERGIiwiZmlsZSIsInBhc3N3b3JkIiwiZmlsZU5hbWUiLCJuYW1lIiwiZmlsZVNpemUiLCJzaXplIiwiZmlsZVR5cGUiLCJ0eXBlIiwiYXJyYXlCdWZmZXIiLCJieXRlTGVuZ3RoIiwicGFzc3dvcmRTdHIiLCJoYXNQYXNzd29yZCIsImxlbmd0aCIsImxvYWRpbmdUYXNrIiwiZ2V0RG9jdW1lbnQiLCJwYXNzd29yZEF0dGVtcHRlZCIsIm9uUGFzc3dvcmQiLCJ1cGRhdGVQYXNzd29yZCIsInJlYXNvbiIsImVyciIsInBkZiIsInByb21pc2UiLCJudW1QYWdlcyIsImZ1bGxUZXh0IiwiaSIsInBhZ2UiLCJnZXRQYWdlIiwidGV4dENvbnRlbnQiLCJnZXRUZXh0Q29udGVudCIsInBhZ2VUZXh0IiwiaXRlbXMiLCJtYXAiLCJpdGVtIiwic3RyIiwiam9pbiIsInRleHRMZW5ndGgiLCJ0b3RhbFRleHRMZW5ndGgiLCJtZXNzYWdlIiwiY29kZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJFcnJvciIsInBhcnNlQ0FTVGV4dCIsInRleHQiLCJmdW5kcyIsInRvdGFsVmFsdWUiLCJ0b3RhbEludmVzdGVkIiwiZnVuZFBhdHRlcm4iLCJmb2xpb19wYXR0ZXJuIiwiYW1jX3BhdHRlcm4iLCJsaW5lcyIsInNwbGl0IiwibGluZSIsIm1hdGNoIiwibmFtZU1hdGNoIiwidHJpbSIsInBsYW5NYXRjaCIsInBsYW5UeXBlIiwidmFsdWVNYXRjaCIsImN1cnJlbnRWYWx1ZSIsInBhcnNlRmxvYXQiLCJyZXBsYWNlIiwiaW52ZXN0ZWRBbW91bnQiLCJmb2xpb01hdGNoIiwic2xpY2UiLCJNYXRoIiwibWF4IiwicmV2ZXJzZSIsImZpbmQiLCJsIiwiZm9saW8iLCJzdWJzdHJpbmciLCJhbWNNYXRjaCIsImFtYyIsInB1c2giLCJ2YWx1ZSIsImludmVzdGVkIiwiZSIsInBhcnNlQ0FTRmlsZSIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiZnVuZHNDb3VudCIsImVuZFRpbWUiLCJkdXJhdGlvbiIsInRvRml4ZWQiLCJ0b0xvY2FsZVN0cmluZyIsImlzRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/pdfParser.ts\n");

/***/ })

};
;